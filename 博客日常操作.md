# 抗疫志愿者信息化应用平台

# 1.总体思路:

本次项目带来的是为社区志愿者提供服务和监督的一体化系统demo,总体上根据一个个的救援活动为基本

单位设计,采用微信小程序和Web端共同操作的方式进行管理,实现功能的分割,对普通的志愿者来说,只需要

简单的微信小程序操作就可以进行志愿活动的一系列流程,实现一个完整的救援需求,而对于救援信息的发布

者,救援物资的提供者,救援活动的审批者,以及各个社区活动之间的统筹安排等则通过更为专业,更精准的网

页操作来完成.

下面以一个救援活动的全部过程为例子描述一下我们设计的平台的工作流程.



### ·总体思路

### ·后端设计

### ·Web前端设计

### ·微信小程序端设计

### ·项目总结

## 1.1 救援活动的发布:

使用web操作,每个志愿者都可发布志愿活动,发布后被社区管理员审核,审核成功之后就进入招募阶段,在这

个阶段,所有的社区人员和志愿者都可以看到各个活动的详细信息,以便于对其进行监督.

## 1.2 救援活动的报名:

我们希望对于单纯的救援人员来说,只使用手机就可以完成与活动相关的所有的功能.社区的所有的救援活动一经审批通过,可在微信小程序上查看,并点击报名,不限制人数的报名可以直接进行,而限制人数的也可在时间段内直接报名,然后在报名时间结束之后,有系统进行摇号自动生成报名名单,各位志愿者可以通过微信小程序查看自己的报名志愿成功情况,报名成功后可以参与救援活动.

## 1.3 救援活动的进行:

把救援活动抽象为活动开始,活动进行,活动结束三个部分,在活动创建时,可以选择多种进行活动的方式,如当活动审核成功后,活动的创建者会得到活动开始和结束的签到码,并在活动现场告知各位志愿者,然后志愿者在活动开始和结束的一段时间内通过输入签到码的方式进行签到,便于后需进行志愿认证.

## 1.4 救援活动的结算:

活动结束后,系统会根据活动创建者设置的签到时间自动的生成活动状态:完成或未完成,同时,活动创建者也

可根据自己的认知情况手动的更改某些志愿者的志愿情况,在情况确认后,可以为志愿者加相应的志愿时长以

及得分等,同时为了便于监督,所有的志愿者的志愿服务情况,会在网站上进行公示.

## 1.5 救援活动的反馈:

志愿者完成志愿活动后(完成活动结束的签到后),可以进行活动的反馈,包括评分与详细的文字反馈等,而活动

的组织者和管理员可以看到所有的活动反馈,来帮助他们做得更好,同时,未进行这个志愿活动的公众也可以

对社区进行的活动提意见或者进行举报等.

## 1.6 救援活动的个人信息平台以及激励:

救援活动是一种发自内心的活动,是一种无私的奉献,但是他们同时也需要激励与回顾,对志愿者来说,自己所参加的所有救援活动情况均可在微信小程序端查看,而对志愿者的激励主要体现在微信小程序端的志愿活动排行榜,和各种志愿活动的推送上,而对于志愿活动组织和创建者的激励则由社区管理员之后自主决定.

![QQ截图20220802133349](file:///C:/Users/wpy/Desktop/QQ%E6%88%AA%E5%9B%BE20220802133349.png)

##### 救援活动流程图

## 1.7 后续优化思路:

### 1.7.1 定制推送服务:

根据志愿者已经参加过的救援活动或者填写的意愿,专长等信息,为志愿者更加精准的推送和安排志愿活动,(如为医护人员志愿者群体安排社区医疗服务)更精准的发挥志愿者的能量

### 1.7.2 社区服务:

当前的demo仅仅是针对于一个特定的社区,后续拟推出跨社区救援活动的功能,使志愿者们可以跨越不同的社区进行救援活动,同时在各个不同社区之间实现统一招募,统一认证,统一反馈的功能,同时可以在不同社区之间进行积分排名对比,为各种层次的志愿活动激励提供依据.

### 1.7.3 物资调度服务:

现在程序对救援物资的处理通过活动的具体信息和活动反馈体现,后续会把物资处理变成单独的模块,以便于让物资的调度变得更加快捷高效,同时为物资的使用情况提供单独的查询访问窗口,使公众查询物资调度使用变得更加透明.

# 2.后端设计:

## 2.1 综述:

项目采用前后端分离的方式进行开发,后端主要使用springboot和springmvc,Web端和微信小程序端共用一套

数据库,使用不同的接口实现不同的功能.

![QQ截图20220802141326](file:///C:/Users/wpy/Desktop/QQ%E6%88%AA%E5%9B%BE20220802141326.png)

##### 项目文件结构

## 2.2 数据库设计:

设计三张实体类表,user:用户,activity:活动,feedback:活动反馈,维护表之间的关系不通过@manytomany这种注

解,而是手写中间表维护,(因为需要添加额外的字段),故还有一张user-activity表.一般的增删改查使用spring-data-jpa直接完成,复杂的查询情况通过原生sql语句实现.

## ![QQ截图20220802135146](file:///C:/Users/wpy/Desktop/QQ%E6%88%AA%E5%9B%BE20220802135146.png)

##### 数据库表列表

![QQ截图20220802135754](file:///C:/Users/wpy/Desktop/QQ%E6%88%AA%E5%9B%BE20220802135754.png)

##### 活动方面的部分sql语句

## 2.3 接口设计:

主要分为用户操作接口和活动部分接口两大部分,用户操作主要实现用户的登录.注册.修改各类个人信息等功能,而活动接口则完成主要的活动功能.

浏览器端使用shiro框架和jwt维护状态,而微信小程序端的接口则直接放行

接口文档通过swagger-ui自动的生成,便于前端和微信小程序端人员查看并调用

![QQ截图20220802140057](file:///C:/Users/wpy/Desktop/QQ%E6%88%AA%E5%9B%BE20220802140057.png)

##### shiro部分配置

![QQ截图20220802140446](file:///C:/Users/wpy/Desktop/QQ%E6%88%AA%E5%9B%BE20220802140446.png)

##### 部分接口文档

## 2.4 其他处理及技术:

### 2.4.1 全局跨域配置:

主要是为了解决跨域问题

因为对于携带token的访问不能简单地通过注解解决,故用全局的配置类来解决

![QQ截图20220802140948](file:///C:/Users/wpy/Desktop/QQ%E6%88%AA%E5%9B%BE20220802140948.png)

##### 全局跨域配置类

### 2.4.2 图片处理:

个人信息和活动信息处都需要图片,具体处理的思路是每个活动和志愿者数据库中有一个字段表征他们图片的地址,数据库为避免压力过大并不存储图片,得到相应的信息后,使用字段访问统一获取图片的接口获取相应的图片.

![QQ截图20220802141133](file:///C:/Users/wpy/Desktop/QQ%E6%88%AA%E5%9B%BE20220802141133.png)

##### 统一获取图片接口

### 2.4.3 报名机制处理:

报名机制是整个活动流程中相对比较复杂的一个环节,具体的实施思路是:活动开始报名后,由组织者设置报名时间段,在这个时间段内均可提交报名申请,提交申请后则把一一对应的人员和活动信息存入数据库报名时间结束后,根据报名人数和拟招募人数来进行判断,如果报名人数小于等于拟招募人数,则所有人都被招募,如果报名人数大于拟招募人数,则根据二者的差值,生成不重复的随机数,然后从数据库中把这些人的信息删除,从而留下刚好对应的人数.

![QQ截图20220803155032](file:///C:/Users/wpy/Desktop/QQ%E6%88%AA%E5%9B%BE20220803155032.png)

##### 报名机制的逻辑

![QQ截图20220803155137](file:///C:/Users/wpy/Desktop/QQ%E6%88%AA%E5%9B%BE20220803155137.png)

##### 生成不重复的随机数算法

### 2.4.4 全局异常处理:

利用此全局异常处理,程序异常时,既可以在访问接口时体现异常问题,也可以在服务器端控制台体现.

![QQ截图20220803155507](file:///C:/Users/wpy/Desktop/QQ%E6%88%AA%E5%9B%BE20220803155507.png)

##### 全局异常处理部分代码

# 3.前端设计:

## 3.1 网页设计思路:

### 3.1.1 定位网站主体和名称:

该网站是为了志愿者以及志愿活动组织者服务，应当简洁明了，通俗易懂，方便操作，具有象征性，让人们对他马上有印象并且记住。

### 3.1.2 确定网站模块:

登录模块：我们没有与以往的登录注册界面不同，我们将登录注册功能写到同一个界面上，以一种更有趣更新奇的方式进行登录注册。

为了方便操作，我们将主页面分为两种，一种是志愿者主页面，只要志愿者登录就可以进入主页面查看志愿活动的相关信息；一种是审批者主页面，审批者通过身份认证之后即可进入审批者主页面对相关志愿活动进行审批，避免了繁琐的操作。

### 3.1.3 技术栈:

主要运用了vue，axios，router，element-UI组件库等技术.

## 3.2 页面设计:

### 3.2.1 总体介绍:

该网站分为三个主页面，分别为：登录页面，志愿者主页面，审批者主页面，每个页面都实现了其相应的功能.

### 3.2.2 登录页面:

在同一页面中实现登录和注册功能，其中紫色div可左右滑动显示对应功能，运用axios与后端数据库连接，验证密码是否正确或者注册账号，账号密码正确则运用router跳转到对应页面。

![image-20220803160409246](C:\Users\wpy\Desktop\博客日常操作.assets\image-20220803160409246.png)

##### 登录页面

![image-20220803160559277](C:\Users\wpy\Desktop\博客日常操作.assets\image-20220803160559277.png)

##### 注册页面

![QQ图片20220803160646](file:///C:/Users/wpy/Desktop/QQ%E5%9B%BE%E7%89%8720220803160646.jpg)

##### 相关代码

### 3.2.3 志愿者主界面:

主要分为五部分，用户信息部分，志愿活动发放部分，志愿积分排行榜部分，我参加的活动部分。先判断是否为管理员身份，如果为志愿者，则显示以下页面（此页面不可以申请发布志愿活动）在此页面中可以查看公布的志愿活动的详细情况以及志愿者名单，起到群众监督的作用，还可以查看自己的志愿积分，志愿排行榜以及自己过去参加的志愿活动的相关信息。

![image-20220803160909033](C:\Users\wpy\Desktop\博客日常操作.assets\image-20220803160909033.png)

##### 志愿者主页面

若为管理员则展示以下页面，点击页面中的志愿活动即可看到志愿活动的详细信息，也可以对志愿者的完成情况进行认定，也可以查看自己发布的志愿活动的活动反馈以此对自己下一次发布的活动进行调整

![img](file:///C:/Users/wpy/Desktop/QQ%E5%9B%BE%E7%89%8720220803162050.jpg)

##### 志愿活动管理员页面

### 3.2.4 审批者主页面:

在此页面可以查看未审批的志愿活动和已审批的志愿活动，并且对未审批的志愿活动进行审批.

![QQ图片20220803161936](file:///C:/Users/wpy/Desktop/QQ%E5%9B%BE%E7%89%8720220803161936.jpg)

### 3.2.5 创建活动:

在此页面可进行活动内容的填写，待审核通过后即可出现在志愿者主页面上的志愿活动中，点击返回按钮则会返回原页面。

![image-20220803161459504](C:\Users\wpy\Desktop\博客日常操作.assets\image-20220803161459504.png)

##### 发布活动

![Cache_28c2cb60f885e65f.](file:///C:/Users/wpy/Desktop/Cache_28c2cb60f885e65f..jpg)

##### 相关代码

### 3.2.6 用户信息部分:

![image-20220803161549318](C:\Users\wpy\Desktop\博客日常操作.assets\image-20220803161549318.png)

##### 个人身份处理

![image-20220803161632017](C:\Users\wpy\Desktop\博客日常操作.assets\image-20220803161632017.png)

##### 修改个人信息

# 4.微信小程序端设计:

## 4.1 首页设计:

首页部分计划实现轮播图，分类跳转，精选活动，在相应的活动界面会有报名功能及查看是否摇号成功的功能。

（1） 轮播图（推出评分最高的三个活动），调用“http://3.36.73.0:8080/activity/rotation”接口，以get方式从后端获取轮播图图片以及对应活动的详细信息，并把返回信息中的图片显示到页面上，并且实现点击轮播图实现跳转到相应活动的功能。

（2） 精选活动（推出逻辑人数最多的十个活动），调用“http://3.36.73.0:8080/activity/selected”接口，以 get方式从后端获取精选活动图片以及对应活动的详细信息，并把返回信息中的图片显示到页面上，并且实现点击精选活动图片实现跳转到相应活动的功能。

![image-20220803162451243](C:\Users\wpy\Desktop\博客日常操作.assets\image-20220803162451243.png)

##### 首页页面

（3） 分类，调用“http://3.36.73.0:8080/activity/type”接口，以post方式传入相应分类id，从后端返回结果获取不同分类下对应的特定活动，实现点击分类跳转到分类页面，选择不同分类中的特定活动，携带参数跳转可以实现跳转到活动详情页。

![image-20220803162525316](C:\Users\wpy\Desktop\博客日常操作.assets\image-20220803162525316.png)

##### 分类页面

（4） 具体活动信息展示及报名，调用“http://3.36.73.0:8080/activity/signActivity”接口，以post方式携带参数根据用户名和活动标题报名，并将返回的报名结果显示到页面中，分为“我要报名”，“已报名，请等待摇号结果”，“恭喜您，摇号成功”，“真可惜，等待下一次的机会吧！”

![image-20220803162610408](C:\Users\wpy\Desktop\博客日常操作.assets\image-20220803162610408.png)

##### 活动展示及报名

## 4.2 签到设计:

签到作为志愿活动的重要环节，我们页面设计时以简洁的风格为主尽可能地让志愿者减少操作。同时我们采用签到码的方式来进行签到.为了防止代签，迟到，报名未参加等情况的出现，在志愿活动开始前，我们会将参加志愿的每位成员的签到码通过web端发送给负责人，志愿者需要在现场领取属于自己的签到码。

![image-20220803162721456](C:\Users\wpy\Desktop\博客日常操作.assets\image-20220803162721456.png)

##### 通过提交签到码的方式进行签到

## 4.3 个人平台设计:

个人中心部分实现用户初次打开时的登录和注册，此外还负责展示个人信息，显示用户的志愿记录等功能。注册按钮跳转至注册页面，引导用户输入用户名，密码，昵称，然后调用注册接口将用户输入的信息上传至后端数据库，以完成注册。同理登录按钮和登录页面，能够让用户成功登录志愿小程序。

![image-20220803162912933](C:\Users\wpy\Desktop\博客日常操作.assets\image-20220803162912933.png)

##### 初次登录

![img](file:///C:/Users/wpy/AppData/Local/Temp/ksohtml28852/wps2.png)

##### 未登录时显示页面

登录成功后，注册和登录按钮消失，转而显示用户的头像和昵称.

![QQ截图20220803163331](file:///C:/Users/wpy/Desktop/QQ%E6%88%AA%E5%9B%BE20220803163331.png)

##### 登陆成功后显示

个人中心的下半区域，负责显示用户的志愿数量，点击相关区域，跳转页面，可查看详细的用户志愿记录，而且为了方便用户查看，志愿记录分为4类，已完成，未完成，违约，和所有志愿。

![QQ截图20220803163454](file:///C:/Users/wpy/Desktop/QQ%E6%88%AA%E5%9B%BE20220803163454.png)

##### 个人中心下方页面

接下来就是主要功能区域，包括了个人资料，积分商城(暂未实现)等四个功能模块.

![QQ截图20220803163625](file:///C:/Users/wpy/Desktop/QQ%E6%88%AA%E5%9B%BE20220803163625.png)

##### 个人资料页面